<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jstl/core">
    
<f:metadata>
	<f:viewParam name="v" value="#{beanMedia.idMediaVisualise}"/>
	<f:event type="preRenderView" listener="#{beanMedia.processRecherche()}"/>
</f:metadata>

<ui:composition template="/templates/standard.xhtml">
	<ui:define name="pageTitle">Détail d'un média</ui:define>
	<ui:define name="content">
		<section class="group1">
		    <div id="fb-root"></div>
			<script>(function(d, s, id) {
			  var js, fjs = d.getElementsByTagName(s)[0];
			  if (d.getElementById(id)) return;
			  js = d.createElement(s); js.id = id;
			  js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1";
			  fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));</script>
		      
			<h3>Détail d'un média</h3>
			<br/>
			<span class="titre">
				<h:outputText value="#{beanMedia.titreMedia}" />
			</span>
			
			<br/><br/><br/><br/>
			
			<!-- *** Lecteur audio/vidéo *** -->
			
			<!-- surrounding element with class - needed!! -->
			<h:panelGroup rendered="#{beanMedia.nomTypeMedia == 'video' }">
				<div onclick="incrementerNbVues()" class="leanback-player-video" style="z-index: 0;">
			    <!-- HTML5 <video> element -->
			       <video width="612" height="404" preload="metadata" poster="../resources/videos/elephants_dream_640x360.jpg"> <!--  width="472" height="264" -->
				        <!-- HTML5 <video> sources -->
				        <source src="../resources/videos/elephants_dream_640x360_2.30.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>
		<!--		    <source src="../resources/videos/360p/elephants_dream_640x360_2.30.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>
		 	       		<source src="../resources/videos/480p/elephants_dream_856x480_2.30.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>
				        <source src="../resources/videos/720p/elephants_dream_1280x720_2.30.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>
		-->
						<source src="../resources/videos/elephants_dream_640x360_2.30.webm" type='video/webm; codecs="vp8, vorbis"'/>       
		<!--			<source src="../resources/videos/360p/elephants_dream_640x360_2.30.webm" type='video/webm; codecs="vp8, vorbis"'/>
				    	<source src="../resources/videos/480p/elephants_dream_856x480_2.30.webm" type='video/webm; codecs="vp8, vorbis"'/>
				        <source src="../resources/videos/720p/elephants_dream_1280x720_2.30.webm" type='video/webm; codecs="vp8, vorbis"'/>
		-->		        
						<source src="../resources/videos/elephants_dream_640x360_2.30.ogv" type='video/ogg; codecs="theora, vorbis"'/>
		 <!--		    <source src="../resources/videos/360p/elephants_dream_640x360_2.30.ogv" type='video/ogg; codecs="theora, vorbis"'/>
		 		  		<source src="../resources/videos/480p/elephants_dream_856x480_2.30.ogv" type='video/ogg; codecs="theora, vorbis"'/>
			    		<source src="../resources/videos/720p/elephants_dream_1280x720_2.30.ogv" type='video/ogg; codecs="theora, vorbis"'/>
		-->	
				    	<!-- subtitle-references with <track>-element -->
		 				<track enabled="true" kind="subtitles" label="عربي" srclang="ar" type="text/x-srt" src="../resources/subtitles/elephants_dream/arabic_ar.srt"></track>
						<track enabled="true" kind="subtitles" label="中文" srclang="zh" type="text/x-srt" src="../resources/subtitles/elephants_dream/chinese_zh.srt"></track>
						<track enabled="true" kind="subtitles" label="Deutsch" srclang="de" type="text/x-srt" src="../resources/subtitles/elephants_dream/german_de.srt"></track>
						<track enabled="true" kind="subtitles" label="English" srclang="en" type="text/x-srt" src="../resources/subtitles/elephants_dream/english_en.srt"></track>
		 				<track enabled="true" kind="subtitles" label="Español" srclang="es" type="text/x-srt" src="../resources/subtitles/elephants_dream/spanish_es.srt"></track>
						<track enabled="true" kind="subtitles" label="Français" srclang="fr" type="text/x-srt" src="../resources/subtitles/elephants_dream/french_fr.srt"></track>
						<track enabled="true" kind="subtitles" label="日本語" srclang="ja" type="text/x-srt" src="../resources/subtitles/elephants_dream/japanese_ja.srt"></track>
						<track enabled="true" kind="subtitles" label="Svenska" srclang="sv" type="text/x-srt" src="../resources/subtitles/elephants_dream/svenska_sv.srt"></track>
					    
					    <!-- Flash-Fallback -->
				   		<object class="leanback-player-flash-fallback" width="472" height="259" type="application/x-shockwave-flash" data="../resources/flash/flowplayer-3.2.7.swf">
				            <param name="movie" value="../resources/videos/flash/flowplayer-3.2.7.swf" />
							<param name="allowfullscreen" value="true" />
							<param name="bgcolor" value="#000000" />
							<param name="flashvars" value='config={"clip":{"url":"../resources/videos/elephants_dream_640x360_2.30.mp4","autoPlay":false,"autoBuffering":false}}' />
							<!--<param name="flashvars" value='config={"clip":{"url":"../resources/videos/360p/elephants_dream_640x360_2.30.mp4","autoPlay":false,"autoBuffering":false}}' />-->
				        </object>
				 
				        <!-- HTML-Fallback - Download Links -->
				        <div class="leanback-player-html-fallback">
				            <img src="../resources/videos/elephants_dream_640x360.jpg" width="360" height="240" alt="Poster Image" 
				                title="No HTML5 media playback capabilities available." />
				            <div>
				                <strong>Download Video:</strong>
				                <a href="../resources/videos/elephants_dream_640x360_2.30.mp4">.mp4</a>,
				                <a href="../resources/videos/elephants_dream_640x360_2.30.webm">.webm</a>,
				                <a href="../resources/videos/elephants_dream_640x360_2.30.ogv">.ogv</a>
				                <!--<a href="../resources/videos/360p/elephants_dream_640x360_2.30.mp4">.mp4</a>,
				                <a href="../resources/videos/360p/elephants_dream_640x360_2.30.webm">.webm</a>,
				                <a href="../resources/videos/360p/elephants_dream_640x360_2.30.ogv">.ogv</a>-->
				            </div>
				        </div>
				    </video>
			</div>
			</h:panelGroup>
			
			
			<br /><br /><br />
				
		
			<h:panelGroup rendered="#{beanMedia.nomTypeMedia == 'audio' }">
				<!-- surrounding element with class - needed!! -->
				<div onclick="incrementerNbVues()" class="leanback-player-audio" style="width:612px; z-index: 0;"><!-- width="350px" -->
				    <!-- HTML5 <audio> element -->
				    <audio preload="metadata">
				        <!-- HTML5 <audio> sources -->
				        <source src="../resources/audios/03_Snowflake_GiveItUp_4.19.mp4" type='audio/mp4; codecs="mp4a.40.2"'/>
				        <source src="../resources/audios/03_Snowflake_GiveItUp_4.19.mp3" type='audio/mpeg; codecs="vorbis"'/>
				        <source src="../resources/audios/03_Snowflake_GiveItUp_4.19.oga" type='audio/ogg; codecs="vorbis"'/>
				    
				    	<!-- HTML-Fallback - Download Links -->
				        <div class="leanback-player-html-fallback">
				            <div>
				                <strong>Download Audio:</strong>
				                <a href="../resources/audios/03_Snowflake_GiveItUp_4.19.mp4">.mp4</a>
				                <a href="../resources/audios/03_Snowflake_GiveItUp_4.19.mp3">.mp3</a>
				                <a href="../resources/audios/03_Snowflake_GiveItUp_4.19.oga">.oga</a>
				            </div>
				        </div>
				    </audio>
				</div>
			</h:panelGroup>
			
			<h:form>
		        <a4j:jsFunction name="incrementerNbVues" action="#{beanMedia.incrNbVues}">
		        </a4j:jsFunction>
		    </h:form>
			
			
			<br /><br /><br /><br />
		
			<rich:panel styleClass="gauche">
			<h:form>
			<h:graphicImage library="images" name="icones/emot-heureux-smiley-icone-6821-16.png" alt="J'aime ce contenu" />
			<h:commandButton value="J'aime" title="J'aime ce contenu" action="#{beanMedia.jAime}"><!-- jAime + pop-up TODO -->
				<rich:componentControl target="popupJAime" operation="show" />
			</h:commandButton>
			<rich:popupPanel id="popupJAime" modal="false" autosized="true"
		        resizeable="false" style="width: 150px; z-index: 99999;">
		        <f:facet name="header">
		            <h:outputText value="J'aime ce contenu" />
		        </f:facet>
		        <f:facet name="controls">
		            <h:outputLink value="#"
		                onclick="#{rich:component('popupJAime')}.hide(); return false;">
		                    X
		                </h:outputLink>
		        </f:facet>
		        <p class="bold">Merci !</p>
		        <p>
		        	<a href="#"
		            	onclick="#{rich:component('popupJAime')}.hide()">Fermer</a>
		        </p>
		    </rich:popupPanel>
			</h:form>
			
			
			<h:form>
				<h:graphicImage library="images" name="icones/triste-smiley-icone-7611-16.png" alt="Je n'aime pas ce contenu" />
				<a4j:commandButton value="Je n'aime pas" title="Je n'aime pas ce contenu" action="#{beanMedia.jeNAimePas}"/>
				<!-- pop-up + action TODO -->			
			</h:form>
			
			<h:form>
			<!--<rich:panel style="width:220px;">
	            <f:facet name="header">
	                <h:outputText value="Select with manual input"></h:outputText>
	            </f:facet>-->
	          
	            <h:selectOneMenu id="selectAjouter" label="+ Ajouter à" style="width:105px;">
               		  <f:selectItem itemValue="F" itemLabel="#{beanMedia.txtFavori}" />
                      <f:selectItem itemValue="P" itemLabel="Playlist"/>
                      <a4j:ajax event="change" render="selectAjouter" execute="@this" listener="#{beanMedia.ajouterAFavori}"/>              
                </h:selectOneMenu><!-- TODO 2 event différents -->
	        <!--</rich:panel>-->
	        
	            
	        <h:commandButton value="Call the popup">
		        <rich:componentControl target="popupPlaylist" operation="show" />
		    </h:commandButton>
		    <rich:popupPanel id="popup" modal="false" autosized="true" resizeable="false" style="z-index: 99999;">
		        <f:facet name="header">
		            <h:outputText value="Ajouter à une playlist" />
		        </f:facet>
		        <f:facet name="controls">
		            <h:outputLink value="#" onclick="#{rich:component('popupPlaylist')}.hide(); return false;">
		                X
		            </h:outputLink>
		        </f:facet>
		        <p>
		        	Cliquez sur une playlist pour ajouter ou retirer cette vidéo
		        	
			        <rich:dataTable value="#{beanMedia.listePlaylistUt}" var="play" id="table">
			            <rich:column sortBy="#{play.nomPlaylist}" id="nomPlaylist" sortOrder="">
			                <f:facet name="header">
			                	<a4j:commandLink value="Nom" render="table" action="#{beanMedia.sortByNom}" />
			                </f:facet>
			                <h:graphicImage library="images" name="icones/#{beanMedia.imgAjoutPlaylist}" alt="Ajouter" />
	        				<h:commandLink value="#{play.nomPlaylist}" action="#{beanMedia.ajouterMediAPlaylist}">
			                	<f:param name="idPlaylist" value="#{play.idPlaylist}"/>
							</h:commandLink>
			                (
					        nb TODO
					        )
			            </rich:column>
			            <rich:column sortBy="#{play.visibilite}" id="state" sortOrder="#{play.visibilite}">
			                <f:facet name="header">
			                	<a4j:commandLink value="Visibilité" render="table" action="#{capitalsSortingBean.sortByStates}" />
			                </f:facet>
			                <h:outputText value="#{play.visibilite.nomVisibilite}" />
			            </rich:column>
			        </rich:dataTable>
		            <br/>
		            <h:commandButton value="Créer une playlist">
		            	<rich:componentControl target="popupCreerPlaylist" operation="show" />
		            </h:commandButton>
		            <br/>
		            <a href="#" onclick="#{rich:component('popupPlaylist')}.hide()">Fermer</a>
		        </p>
		    </rich:popupPanel>
	        
	        <rich:popupPanel id="popupCreerPlaylist" modal="false" autosized="true" resizeable="false" style="z-index: 99999;">
						<f:facet name="header">
				            <h:outputText value="Créer une nouvelle playlist" />
				        </f:facet>
				        <f:facet name="controls">
				            <h:outputLink value="#" onclick="#{rich:component('popupCreerPlaylist')}.hide(); return false;">
				                X
				            </h:outputLink>
				        </f:facet>
				        <p>
					<rich:graphValidator value="" id="gv">
			                <rich:messages for="gv" />
			                <rich:messages globalOnly="true" />
			                <h:panelGrid>
			                    <h:outputText value="Nom :" />
			                    <h:inputText value="#{beanMedia.nomPlaylistACreer}" id="nomPlaylistACreer" />
			                    <rich:message for="nomPlaylistACreer" />
			                    <br/>
			                    <h:outputText value="Visibilité :" />
			                    <rich:select value="#{bean.visibilitePlaylistACreer}">
					                <f:selectItems value="#{beanMedia.listeNomVisibilite}" />
					            </rich:select>
					            <br/>
			                    <h:outputText value="Description :" />
			                    <h:inputTextarea rows="2" cols="2" value="#{beanMedia.descriptionPlaylistACreer}" id="descriptionPlaylistACreer">
		           				</h:inputTextarea><!-- TODO pouvoir écrire -->
			                    <rich:message for="descriptionPlaylistACreer" />
			                </h:panelGrid>
			                <a4j:commandButton value="Sauvegarder" action="#{beanMedia.creerPlaylist}" /><!-- TODO rentrer dans fonction -->
			            	<br/>
				            <br/>
				            <a href="#" onclick="#{rich:component('popupCreerPlaylist')}.hide()">Fermer</a>
			        </rich:graphValidator>
			        </p>
		    </rich:popupPanel>
	        
	        </h:form>
	        
	        
        
        	<h:form>
        		<!-- <h:panelGrid columns="1" style="margin-bottom:10px" cellpadding="5">
        		
        		<p:selectOneMenu value=""
                         effect="fade" var="p">
		            <f:selectItem itemLabel="+ Partager" itemValue="" />
		            
		            <p:column>--><!-- images TODO -->  
		        <!--         <p:graphicImage value="/images/icones/document-a-exportation-icone-8861-16.png" width="40" height="50"/>  
		            </p:column>
		        </p:selectOneMenu>
		        
        		</h:panelGrid>-->
        	
        		<rich:select enableManualInput="true" defaultLabel="+ Partager">
	                <f:selectItem itemValue="1" itemLabel="Exporter" />
	                <f:selectItem itemValue="2" itemLabel="Facebook" />
	                <f:selectItem itemValue="3" itemLabel="Twitter" />
	                <f:selectItem itemValue="4" itemLabel="Emails et amis" />
	            </rich:select>
	            
	            
	            
	            <h:commandButton value="Call the popup Exporter">
			        <rich:componentControl target="popupExporter" operation="show" />
			    </h:commandButton>
			    <rich:popupPanel id="popupExporter" modal="false" autosized="true" resizeable="false" style="z-index: 99999;">
			        <f:facet name="header">
			            <h:outputText value="Personnaliser le lecteur exportable" />
			        </f:facet>
			        <f:facet name="controls">
			            <h:outputLink value="#" onclick="#{rich:component('popupExporter')}.hide(); return false;">
			                X
			            </h:outputLink>
			        </f:facet>
			        <p>
			        	<h:outputText value="Lien : " styleClass="bold"/>
			        	<h:outputText id="lien" value="#{request.requestURL}" />
			        	<br/>
			        	<br/>
			        	<h:outputText value="Copier le code d'intégration" styleClass="bold"/>
			        	<br/>
			        	<br/>
			        	<h:inputTextarea>
			        		<h:outputText id="codeIntegration" value="#{beanMedia.codeIntegration}" />
			        	</h:inputTextarea>
			        	<h:selectBooleanCheckbox value="true">
			        		<f:ajax event="click" listener="#{beanMedia.desactiverLecteurIframe}" render="codeIntegration"/>
			        		<h:outputText value="Activer le lecteur iframe compatible iPhone, iPad, Android..."/>
			        	</h:selectBooleanCheckbox>
			        	<br/>
			        	<br/>
			        	<h:outputText value="Préférences" styleClass="bold"/>
			        	<br/>
			        	<br/>
			        	<h:outputText value="Taille du lecteur" styleClass="bold"/>
			        	<br/>
			        	<h:selectOneRadio id="sor" 
							value="#{beanMedia.tailleLecteur}" title="Sélectionnez une taille de lecteur" layout="lineDirection">
							<f:ajax event="change" execute="@form" listener="#{beanMedia.changerTailleLecteur}" render="codeIntegration"></f:ajax>
							<f:selectItem id="si2" itemLabel="Moyen (480x270)" itemValue="moyen" />
							<f:selectItem id="si1" itemLabel="Petit (320x180)" itemValue="petit" />
							<f:selectItem id="si3" itemLabel="Grand (560x315)" itemValue="grand" />
							<f:selectItem id="si4" itemLabel="Taille personnalisée" itemValue="taillePersonnalisee" />
			        	</h:selectOneRadio>
			        	<br/>
			        	<a href="#" onclick="#{rich:component('popupExporter')}.hide()">Fermer</a>
			        </p>
			    </rich:popupPanel>
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    <h:commandButton value="Call the popup Email">
			        <rich:componentControl target="popupEmail" operation="show" />
			    </h:commandButton>
			    <rich:popupPanel id="popupEmail" modal="false" autosized="true" resizeable="false" style="z-index: 99999;">
			        <f:facet name="header">
			            <h:outputText value="Choisissez vos destinataires" />
			        </f:facet>
			        <f:facet name="controls">
			            <h:outputLink value="#" onclick="#{rich:component('popupEmail')}.hide(); return false;">
			                X
			            </h:outputLink>
			        </f:facet>
			        <p>
			        	<h:outputText value="À (adresses e-mail ou noms d'utilisateur) :" styleClass="bold"/>
			        	<a href="#" onclick="#{rich:component('popupEmail')}.hide()">Fermer</a>
			        	<br/>
			        	<br/>
			        	<h:outputText value="Remarque supplémentaire (facultatif) :" styleClass="bold"/>
			        	<br/>
			        	TODO
			        	<br/>
			        	<br/>
			        	<h:outputText value="Aperçu du message :" styleClass="bold"/>
			        	<br/>
			        	bidule a partagé une vidéo avec vous sur MediArea :
			        		titre - TODO
			        </p>
			    </rich:popupPanel>
	        </h:form>
	            
	            <br/>
	            
	            <!-- https://dev.twitter.com/docs/tweet-button : Tweet Button -->
				<a href="https://twitter.com/share" class="twitter-share-button" data-via="twitterapi" data-lang="en">Tweet</a>
				<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
				
	            <!-- Like Button - Facebook Developers -->
				<div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div>
								
				<!-- https://developers.google.com/+/plugins/+1button/ : +1 Button -->
				<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
				<div class="g-plusone" data-size="medium"></div>
				
				<br/>
				
				<!-- http://en.skyrock.com/developer/tools.php : Share on Skyrock -->
				<a href="http://www.skyrock.com/m/blog/share.php?js=0" class="skysocial-s skyrocksocialshare_classic24" title="Share on Skyrock" style="display:inline-block;text-indent:-999em;overflow:hidden;width:57px;height:24px;background:url(http://share.static.skyrock.net/img/api/skyrocksocialshare_classic24.png) no-repeat 0 0 transparent;"><p style="display:none;">Share on Skyrock</p></a>
				<script>(function(){var d=document,id='skyrock-fxlebpx'; if(d.getElementById(id)) return;var e=d.createElement('script');e.id=id;e.async=true;e.src='http://share.static.skyrock.net/js/skyrock_social.min.js';d.getElementsByTagName('body')[0].appendChild(e);}());</script>
				
				<br /><br />
			
	            <h:graphicImage library="images" name="icones/drapeau-rouge-icone-6492-16.png" alt="Peut offenser" />
	            <h:commandButton value="Signaler">
	           		<rich:componentControl target="popupSignaler" operation="show" />
	            </h:commandButton>
	            <rich:popupPanel id="popupSignaler" modal="false" autosized="true"
			        resizeable="false" style="width: 400px; overflow: hidden; z-index: 99999;">
			        <f:facet name="header">
			            <h:outputText value="Signaler cette vidéo (contenu pouvant offenser)" title="" />
			        </f:facet>
			        <f:facet name="controls">
			            <h:outputLink value="#"
			                onclick="#{rich:component('popupSignaler')}.hide(); return false;">
			                    X
			            </h:outputLink>
			        </f:facet>
			        <h:form>
			        <p>Décrivez la raison qui décrit le mieux le problème lié au média. Nous procéderons à un examen afin de déterminer si celle-ci enfreint le Règlement de la communauté ou si elle risque d'offenser certaines personnes. L'usage abusif de cette fonctionnalité constitue également une violation du Règlement de la communauté. Ne l'utilisez pas de manière inadéquate.</p>
			        <p>
			       		<!--<rich:panel style="width:320px;">
					        <f:facet name="header">
					            <h:outputText value="Raison du signalement"></h:outputText>
					        </f:facet>
					        <h:panelGrid columns="2">-->
					            <h:outputText value="Raison du signalement : " styleClass="bold" />
					            <br/>
					            <h:inputTextarea value="#{beanMedia.raison}" id="raison" rows="5" cols="100"></h:inputTextarea>
					            
					        <!--</h:panelGrid>
					    </rich:panel>-->
			       	</p>
			       	<p>
	           			<h:commandButton value="Envoyer le rapport" action="#{beanMedia.envoyerRapport}" style="float: left;"/><!-- h:commandButton et champs utilisés obligatoirement entre h:form-->
			    		
			        	<a href="#" onclick="#{rich:component('popupSignaler')}.hide()" style="float: right;">Fermer</a>
			       	</p>
			       	</h:form>
			    </rich:popupPanel>
			    
			    
	            <br /><br />
	            
	            <span class="bold">
	            	Ajouté par 
	            	<h:outputLink value="TODO/#{beanMedia.auteur}" title="#{tag.nomTag}">
						<h:outputText value="#{beanMedia.auteur}"/>
					</h:outputLink>
	            	le <h:outputText value="#{beanMedia.datePublication}" />
	            </span>
	            <br />
	            <h:outputText value="#{beanMedia.description}" />
	            
        		<br /><br />
        	</rich:panel>
        	
        	<rich:panel styleClass="droite bold">
        		<h:outputText value="#{beanMedia.resultatTotalVuesMedia}">
        			<f:convertNumber integerOnly="true"/>
        		</h:outputText>
        		<h:outputText value=" vue#{beanMedia.motVues}" />
        		
        		<h:form>
	        		<h:commandLink>
	        			<h:graphicImage library="images" name="icones/bar-tableau-graphique-rapport-icone-5031-32.png" alt="Avatar"/>
	        			<rich:componentControl target="popupStatistiques" operation="show" />
	        		</h:commandLink>
	        		
	        		<rich:popupPanel id="popupStatistiques" modal="false" autosized="true" resizeable="false" style="z-index: 99999;">
				        <f:facet name="header">
				            <h:outputText value="Statistiques" />
				        </f:facet>
				        <f:facet name="controls">
				            <h:outputLink value="#" onclick="#{rich:component('popupStatistiques')}.hide(); return false;">
				                X
				            </h:outputLink>
				        </f:facet>
				        <p>
				        <h:outputText value="#{beanMedia.resultatTotalVuesMedia}"/> vue<h:outputText value="#{beanMedia.motVues}"/> - <h:outputText value="#{beanMedia.nbCommentaires}"/> com. - TODO fav. - <h:outputText value="#{beanMedia.resultatTotalVotesMedia}"/> vote<h:outputText value="#{beanMedia.motVotes}"/>
				        <br/>
				        
						    
				            
				        <p:lineChart id="linear" value="#{beanMedia.linearModel}" legendPosition="e"  
     						title="Linear Chart" minY="0" maxY="10" style="height:300px"/>    
				            
				            
				            
				            
				            
				            
				            
				            
				            <a href="#" onclick="#{rich:component('popupStatistiques')}.hide()">Fermer</a>
				        </p>
				    </rich:popupPanel>
				</h:form>
        		
        		
        		
        		
        		
        		
        		
        		<br/>        		
        		50 TODO fois téléchargé
        		<br/>
        		<br/>
        	
        	<h:form>
        		<p:growl id="messages" showDetail="true"/> 
        	
        		<h:panelGrid columns="2" cellpadding="5">
			        <p:rating value="#{beanMedia.note}">  
			            <p:ajax event="rate" listener="#{beanMedia.handleRate}" update="messages" />  
			        </p:rating>
			    </h:panelGrid>
        	</h:form>
        	
        	
        		<br/><br/>
        		
        					
				<rich:inputNumberSlider value="#{beanMedia.resultatNbAime}" width="500" maxValue="#{beanMedia.resultatNbAimeNAimePas}"
        			step="1" showArrows="true" showTooltip="false" disabled="true" />
        		
        		<br/><br/>
        		<!-- Artiste : <h:outputText value="" /><br /> -->
        		
        		<h:graphicImage library="images" name="icones/panier-ajouter-icone-5924-32.png" alt="Avatar"/>Ajouter <h:outputText value="#{beanMedia.titreMedia}" /> au panier
        		<!-- TODO panier -->
        		
        		<h:form>
        			<h:outputLink value="/MediArea/resources/#{beanMedia.nomTypeMedia}s/#{beanMedia.titreMedia}.mp3">
					  <f:verbatim>Télécharger ce média</f:verbatim>
					</h:outputLink>
        		</h:form>
        	
        		
        	</rich:panel>
        	
        	<div style="clear: both;"></div>
        	
        	
        	
        	
        	<rich:collapsiblePanel header="Plus" switchType="client"> 
	                <h:outputText value="Catégorie : " styleClass="bold" />
	                <br/>
	                <a4j:repeat value="#{beanMedia.listeCategories}" var="categ" rows="20" id="repeatCategories">
						<h:outputLink value="recherche.jsf?categ=#{categ.nomCategorie}" title="#{categ.nomCategorie}">
							<h:outputText value="#{categ.nomCategorie}"/>
						</h:outputLink>
						<h:outputText value=" "/>
		    		</a4j:repeat>
	                
	                <br/>
	                <br/>
	                
	                <h:outputText value="Tags : " styleClass="bold" />
	                <br/>
					<a4j:repeat value="#{beanMedia.listeTags}" var="tag" rows="20" id="repeatTags">
						<h:outputLink value="recherche.jsf?tag=#{tag.nomTag}" title="#{tag.nomTag}">
							<h:outputText value="#{tag.nomTag}"/>
						</h:outputLink>
						<h:outputText value=" "/>
		    		</a4j:repeat>
	        </rich:collapsiblePanel>
		
        	
        	
			<br /><br />
			
			<h5>
				Commentaires 
				( 
				<h:outputText value="#{beanMedia.nbCommentaires}">
					<f:convertNumber integerOnly="true"/>
				</h:outputText>
				)
			</h5>
		   	
		   	<h:form>
					<rich:editor id="editor" value="#{editorBean.value}" style="margin-bottom: 1em" theme="advanced">
			            <a4j:ajax event="change" render="panel" status="panelUpdateStatus" />
			            <a4j:ajax event="dirty" render="panel" status="panelUpdateStatus">
			                <a4j:attachQueue requestDelay="1000" />
			            </a4j:ajax>
			            Réagir à propos de ce média.
			        </rich:editor>
			         
			        <rich:panel id="panel">
			            <f:facet name="header">
			                Output from Editor
			                <a4j:status name="panelUpdateStatus">
			                    <f:facet name="start">
			                        (Updating)
			                    </f:facet>
			                </a4j:status>
			            </f:facet>
			            <h:outputText escape="false" value="#{editorBean.value}" />
			        </rich:panel>
			  	<br/>
			   	<a4j:commandButton value="Publier" render="out" execute="@form"/>
			</h:form>
		   	
		   	
		    <br />
		    
		    <!-- <a4j:outputPanel id="out">
		        <h:outputText value="Hello #{beanMedia.commentaireSaisi} !"
		            rendered="#{not empty beanMedia.commentaireSaisi}" />
		    </a4j:outputPanel> -->

   			<a4j:outputPanel id="out">
		        <h:outputText value="Hello #{beanMedia.commentaireSaisi} !"
		            rendered="#{not empty beanMedia.commentaireSaisi}" />
		    </a4j:outputPanel>
    
		    <br/><br/><br/><br/><br/>
    		
    		
    		<br/>
    		
    
    		<!-- *** dataScroller *** -->	
			<h:form id="form2">
			
				
			
			
		        <h:panelGrid columnClasses="acent">
		            <rich:dataScroller for="table" maxPages="5" />
		            <rich:dataTable value="#{beanMedia.commentaires}" var="commentaire" id="table" rows="10">
		                <rich:column accept="#{testFiteringBean.accepttest}">
		                    <f:facet name="header">
		                        <h:outputText value="---" />
		                    </f:facet>
		                    <h:outputText value="#{commentaire.auteur.pseudo}" />
		                    <br/>
		                    <h:outputText value="#{commentaire.dateCommentaire}">
		                    	<f:convertDateTime pattern="MM/dd/yy HH:MM"/> 
		                    </h:outputText>
		                    <br/>
		                    <h:graphicImage library="images" name="avatars/#{beanMedia.nomAvatar}" alt="Avatar" />
			            </rich:column>
		                <rich:column>
		                    <f:facet name="header">
		                        <h:outputText value="" />
		                    </f:facet>
		                    <h:outputText value="#{commentaire.contenuCommentaire}" />
		                    
		                    
	                        
					         <h:panelGrid columns="2">
					            <h:inputText value="#{commentaire.contenuCommentaire}" />
					            <a4j:commandButton value="Répondre" action="#{beanMedia.rendreVisible}" render="out2" execute="@form">
					            </a4j:commandButton> 
					            
					        </h:panelGrid>
						    <br />
						    
						    <h:inputText id="out2" rendered="#{beanMedia.estVisible}"/>
						    
		                    
		                </rich:column>
		            </rich:dataTable>
		            <rich:dataScroller for="table" maxPages="5" />
		        </h:panelGrid>
		    </h:form>
		    
		</section>
		
		
		
		<aside class="group2">
			<h3>Suggestions</h3>
			<article class="holder_news">
				<h:form>
			        <h:panelGrid columns="1">
			            <a4j:outputPanel id="panel" layout="block">
			                <a4j:repeat value="#{beanMedia.listeMediasSuggeres}" var="mediaSuggere" rows="20"
			                    id="repeat">
			                    <rich:panel style="float:left; width:200px; padding:5px;">
			                        <f:facet name="header">
			                            <h:panelGroup>
			                                <h:outputText value="#{mediaSuggere.titreMedia}" style="font-weight:bold" />
			                            </h:panelGroup>
			                        </f:facet>
			                        <h:panelGrid columns="3">	                            
			                            <h:graphicImage value="#{mediaSuggere.photo}" alt="flag" style="float: left;"/>
			                            de
			                            <div style="float: right;">
				                            <h:outputText value="#{mediaSuggere.auteurMedia.pseudo}" style="font-weight:bold;" />
				                            <br/><br/>
				                            ...
				                        	vues
			                        	</div>
			                        </h:panelGrid>
			                    </rich:panel>
			                </a4j:repeat>
			            </a4j:outputPanel>
			            <!-- <a4j:outputPanel layout="block">
			                <rich:dataScroller for="repeat" render="panel" />
			            </a4j:outputPanel> -->
			        </h:panelGrid>
			    </h:form>
			</article> 
		</aside>
		
	</ui:define>
</ui:composition> 
</html>
 